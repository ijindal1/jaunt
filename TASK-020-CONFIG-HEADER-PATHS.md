# TASK-020: Config + Header + Path Mapping (Layer 2 plumbing)

## Objective
Implement:
- `jaunt.toml` loading and validation
- generated file header formatting/parsing
- pure path mapping utilities for module â†” generated module/file paths

This task should not implement discovery/import scanning, digests, or generation.

## Deliverables
### Code
- `src/jaunt/config.py`
  - `find_project_root(start: Path) -> Path`
    - walk upward looking for `jaunt.toml`
  - config dataclasses:
    - `PathsConfig`, `LLMConfig`, `BuildConfig`, `TestConfig`, `PromptsConfig`, `JauntConfig`
  - `load_config(*, root: Path | None = None, config_path: Path | None = None) -> JauntConfig`
    - defaults per `TASK-000-MVP-PLAN.md`
    - validate:
      - at least one `source_root` exists
      - `generated_dir` is a valid Python identifier
      - jobs >= 1
    - raise `JauntConfigError` on invalid values

- `src/jaunt/header.py`
  - `format_header(...) -> str` producing:
    - `# This file was generated by jaunt. DO NOT EDIT.`
    - `# jaunt:tool_version=...`
    - `# jaunt:kind=build|test`
    - `# jaunt:source_module=...`
    - `# jaunt:module_digest=sha256:<hex>`
    - `# jaunt:spec_refs=<json-array>`
  - `parse_header(source: str) -> dict[str, str] | None`
  - `extract_module_digest(source: str) -> str | None`

- `src/jaunt/paths.py` (pure helpers; no writing)
  - `spec_module_to_generated_module(module: str, generated_dir: str = "__generated__") -> str`
    - e.g. `my_project.foo` -> `my_project.__generated__.foo`
  - `generated_module_to_relpath(module: str) -> Path`
    - e.g. `my_project.__generated__.foo` -> `my_project/__generated__/foo.py`
  - `module_to_relpath(module: str) -> Path`
    - `my_project.foo` -> `my_project/foo.py`

Note: writing/ensuring `__init__.py` for generated packages is owned by builder/tester tasks.

### Tests
Under `tests/`:
- config root discovery + defaults + validation error cases
- header roundtrip format/parse + digest extraction from realistic generated content
- paths mapping for:
  - `my_project` (init) -> `my_project/__generated__/__init__.py`
  - `my_project.sub.mod` -> `my_project/__generated__/sub/mod.py`

## Copy/Paste Prompt (for a separate coding agent)
You are implementing TASK-020 in the repo at `/Users/ishitajindal/Documents/jaunt`.

Do:
- Implement `src/jaunt/config.py`, `src/jaunt/header.py`, `src/jaunt/paths.py` as specified.
- Add unit tests under `tests/`.

Constraints:
- No CLI/build orchestration work.
- No network calls.

Quality gates:
- `uv run ruff check .`
- `uv run ty check`
- `uv run pytest`


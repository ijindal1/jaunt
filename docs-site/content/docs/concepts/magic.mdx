---
title: "@jaunt.magic Specs"
description: Write implementation intent as top-level stubs that Jaunt generates into real modules.
---

Specs must be **top-level** functions or classes. The body is not used at runtime, but the *source segment + docstring + type hints* are used as the generation contract and are hashed for incremental rebuilds.

```python
from __future__ import annotations

import jaunt


@jaunt.magic()
def normalize_email(raw: str) -> str:
    """
    Normalize an email address for stable comparisons.

    Rules:
    - Strip surrounding whitespace.
    - Lowercase the whole string.
    - Must contain exactly one "@".

    Errors:
    - Raise ValueError if the input is not a valid email by these rules.
    """
    raise RuntimeError("spec stub (generated at build time)")
```

At runtime, calling a `@jaunt.magic` function forwards to the generated implementation in the corresponding `__generated__` module. If you call it before generating, it raises `jaunt.JauntNotBuiltError` with a hint to run `jaunt build`.

### Decorator Options

- `deps=...`: explicit dependencies (see Dependencies).
- `prompt="..."`: extra text appended into the spec block for that symbol only.
- `infer_deps=True|False`: per-spec override of dependency inference.

